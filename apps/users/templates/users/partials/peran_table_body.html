{% for peran in peran_list %}
<tr class="hover">
    <th>
        {% if page_obj %}
            {{ page_obj.start_index|add:forloop.counter0 }}
        {% else %}
            {{ forloop.counter }}
        {% endif %}
    </th>
    <td>
        <div class="font-bold flex items-center gap-2">
            <i class="fa-solid fa-user-shield text-gray-400"></i>
            {{ peran.nama }}
        </div>
    </td>
    <td>
        <span class="badge badge-ghost gap-1">
            <i class="fa-solid fa-users text-xs"></i>
            {{ peran.akun_set.count|default:"0" }} Pengguna
        </span>
    </td>
    <td>
        {% load permissions %}
        <div class="flex justify-center space-x-1">
            {% if user|can_edit_model:"peran" %}
            <a href="{% url 'users:peran_edit' pk=peran.pk %}" class="btn btn-sm btn-ghost btn-square text-blue-500" title="Edit">
                <i class="fa-solid fa-edit"></i>
            </a>
            {% endif %}
            
            {% if user|can_delete_model:"peran" %}
            <button type="button"
                    @click="showModal = true; deleteUrl = '{% url 'users:peran_delete' pk=peran.pk %}'; deleteName = '{{ peran.nama }}'"
                    class="btn btn-sm btn-ghost btn-square text-red-500 hover:bg-red-50" 
                    title="Hapus">
                <i class="fa-solid fa-trash"></i>
            </button>
            {% endif %}
        </div>
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="4" class="text-center py-8 text-gray-500">
        <div class="flex flex-col items-center justify-center">
            <i class="fa-solid fa-folder-open text-4xl mb-2 opacity-30"></i>
            <span>Data peran tidak ditemukan.</span>
        </div>
    </td>
</tr>
{% endfor %}