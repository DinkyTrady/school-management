{% for guru in guru_list %}
<tr>
  <th>{{ forloop.counter }}</th>
  <td>
      <div>
        <div class="font-bold">{{ guru.get_full_name }}</div>
        <div class="text-xs opacity-70">{{ guru.nomor_handphone }}</div>
      </div>
  </td>
  <td><span class="badge badge-outline">{{ guru.nip }}</span></td>
  <td><span class="badge badge-info badge-outline">{{ guru.jabatan }}</span></td>
  <td class="text-sm">{{ guru.akun.email }}</td>
  <td>
    {% if guru.akun.is_active %}
      <span class="badge badge-success"><i class="fa-solid fa-check mr-1"></i>Aktif</span>
    {% else %}
      <span class="badge badge-ghost"><i class="fa-solid fa-times mr-1"></i>Tidak Aktif</span>
    {% endif %}
  </td>
  <td>
    <div class="flex space-x-1">
      <a href="{% url 'users:guru_detail' pk=guru.pk %}" 
         class="btn btn-sm btn-ghost btn-square text-gray-500 hover:bg-gray-100" 
         title="Lihat Detail">
        <i class="fa-solid fa-eye"></i>
      </a>
      {% load permissions %}
      {% if user|can_edit_model:"guru" %}
      <a href="{% url 'users:guru_edit' guru.pk %}" class="btn btn-sm btn-ghost btn-square text-blue-500 hover:bg-blue-50" title="Edit">
        <i class="fa-solid fa-edit"></i>
      </a>
      {% endif %}
      {% if user|can_delete_model:"guru" %}
      <button type="button"
              @click="showModal = true; deleteUrl = '{% url 'users:guru_delete' pk=guru.pk %}'; deleteName = '{{ guru.get_full_name }}'"
              class="btn btn-sm btn-ghost btn-square text-red-500 hover:bg-red-50" 
              title="Hapus">
        <i class="fa-solid fa-trash"></i>
      </button>
      {% endif %}
      
      <!-- Role-based access indicator -->
      {% if not user|can_edit_model:"guru" %}
      <span class="text-xs text-gray-400 ml-2" title="Hanya dapat melihat">
        <i class="fas fa-eye-slash"></i>
      </span>
      {% endif %}
    </div>
  </td>
</tr>
{% empty %}
<tr>
  <td colspan="7" class="text-center py-8">
    <div class="text-gray-500">
      <i class="fa-solid fa-chalkboard-user text-6xl mb-4 opacity-30"></i>
      <div class="text-lg font-medium">Belum ada guru yang terdaftar</div>
      <div class="text-sm">Tambah guru baru untuk memulai</div>
    </div>
  </td>
</tr>
{% endfor %}

{{ pagination|safe }}
